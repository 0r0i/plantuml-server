<project default="main" basedir=".">

	<target name="main" depends="clean,compile,war">
	</target>

    <target name="init">
    	<!-- overwrite with your own values in a user.property file -->
    	<property file="user.property" />
        <property name="tomcat-home" value="/tomcat" />
        <property name="debug" value="false" />
        <path id="project-classpath">
            <fileset dir="WEB-INF/lib" includes="*.jar" />
            <fileset dir="${tomcat-home}/lib" includes="*.jar" />
        </path>
    </target>

	<target name="clean">
		<delete file="plantuml.war" />
		<delete dir="WEB-INF/classes" />
		<mkdir dir="WEB-INF/classes" />
	</target>

	<target name="compile" depends="init">
		<javac srcdir="WEB-INF/src" destdir="WEB-INF/classes" debug="${debug}" classpathref="project-classpath" />
	</target>

	<target name="war">
		<war destfile="plantuml.war"
			webxml="WEB-INF/web.xml">
			<classes dir="WEB-INF/classes" />
			<fileset dir="content" />
			<lib dir="WEB-INF/lib" />
		</war>
	</target>

    <target name="deploy" depends="main">
        <copy file="plantuml.war" todir="${tomcat-home}/webapps" overwrite="true" />
    </target>

</project>
